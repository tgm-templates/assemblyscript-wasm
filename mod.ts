import * as brotli from "https://deno.land/x/brotli@v0.1.4/mod.ts";
import dew from "https://dev.jspm.io/as-bind@0.4.2";

async function initWasmModule(): Promise<any> {
    const wasm = brotli.decompress(Uint8Array.from(atob("G/cNAOQopzYzu5Jsr5NsiUc68hG5d+wpuz3Cl60kSmrJZjUpywcAL6AfPp7Hr+K9Ab/I9v/bm7P/z1b347owXUZvohIQBhkj2ftm2/yypVU1oZSi4gAFDotDblG0onClKoTlIFTT2Biu4VcbYHHg/u0hHLQQAPCcfF1lWQZ1yjLM6njPQR1z+gB1nXGEgMD7yTGjMVRRe84JJzv9FFxlJ5QCDyGHmhC0Q45CQPfqiQwFTGQaBCmLEVNMM4e5zGM5lmeFD/Rj3ngPqMVuK2p1+nsIvFotbDY7U5DL1Wr9KA0bbcjnkz+0GYWDCAr5Wm2q02xGUymMm1qtn6aN2mQ4iNT4slotHEw22tO1qJ3298w0mlFtphnOKlpY+jM3pv1Ge7ZW3aSUyDjp98M9G3bNzER92q9eVbulEc1zaM6SerWdXsSFMs1duufmxsnDC1YpfW6Z9uaWSZ37uD7/0M4/b5PCuaSZ5fdsaXbC02ZFrXzBdxxT4fQ0GG8+ak51WhGMFT5YPPEMoc4YSwQBCfY264qAPJ6TZ0jGLYBhkv297QU/jkYjVRVgEnvtKlaP50YPqaorTKLnfHK2113HNJsESnQyJ3bgEyvxEl+xC1vZAUqWVZ2vSViixb6OvqMNHF1hh3WZFhvWusKanTJZw8jAdf4ancZCaVyi+hZdyYdkvc56c5lQuW8Z6BJpOcg03/ORNWOZNCPTG0KJQA6ymu+VCYwxZqTQy668i1sO420Q6NkKHy3Oi415jpD9vThwphV9z8n+HoNOV1NN6L+nK5QxsGORkRVrUb1+oMsEtU0wPhnDWqgnWUPRSRtCRa7zeqR8a7Om165NO3M4q2qH4hx7Y5TDaIyPhtUXo34+pAMdJqWdp33rl6HrqsutmJ2txc5fa47oZK4hzyHClKJUpSqnxhx4SXHtaqPrvPt+YMWu8gGX3QJlsoxn39GG5wsg36rru47spgNFYwAIlamaqcdocxyRMiaZ6G0WpfjidzFdvapnC3cqcU4o0UvFQOmKNlti4ypX8mGlEpqpeLJFg9Ac9T1mk2kXDqZvkdeKkubzdT/GMDEmAck5VV2ZwD5QcBKTcCLYH4N/AhA9SBIyxWKlDBqg95B5qcg0ES2ZFxBVdgIEyB6CV0KA23UmSK+ZVEBgmyNgdAWMHCv4KMcKtdZBflwal1SFQZZp8QQQSuVYIS6StIBPyvCFLS4Sw4T7mUL1MAZjn4poDEOSAVqYGi678gSbWiXHCidaUM98iojw5mhh+H7QkXWMgrKKcTZJY8GEkVH+HI1GWF0V4GziU7AISkh6SSeLBG0kj08MAtGUliyX9gJPWAPGndUFAGY4gNGzkZzLmAywgnRA1StfOBeGdh7OrUmIW9HvAxUMO+4rbPmFre/6JSnZ32Oyizhfiya4tDj1VG2QoYkABcICgKs4h5YQ1FJysOc70gFcruEkosYBBxd7naAQRoN1KAOtXbpWV+TdXKly2Fw7KgllIpauRxAW4yftWBVo6wQKTL0TUeBErxzIztkrgbuRik2so741Za1IVa8TTGLWrE+MZTRSsQyHPmvXnO+w4t/49lXQxDLgS8AoyBWZKXzOa5gGNDfUsjhujKFhUsPastL368kGfmOsLETkrLNYpqJrhNeYoK3LyoyB1bMseWJjEyqwD3KosMMM6jYJEAKSDIfDYWaWSYzT3BUuH+blOxClIwstOeR/rB5X4kfo1QMNg1kIbfTthDGemifG5h1CyqjC5If4lrEybigTvB6DeL0tumKmurfkxDaPzXEMExmsQ9HYp1igEoSs/pkAl4A1CrVAiRzkTgTGUxWsV5BJ0nHJnREVyE8nXC+xWl/LkLix08E7sY5vaiBiz3bTuFfoyzlcvIPnhUuqxXvovYDoZFrL2XzwGyN/FvsZo827QCRrciy/dRqztmCI1r83QSM2KVFRcE4wDRx5I680ysmrONilmIC2ID/mi2TsQAgj42w+0PJOnpUtggi9yjm2yB5jvbQeL+/kbYHJFsLJBUajAM3HTsEAKPVGo9EI9k1uAChx/A1HiAWEvkk9Z5QIxg0R3HVcifI2QGjkDxWujXMwFYpodtPaw+Fwd/3p/8Fr8ZbhWJQTbFASuJrZun+/AohIYlKZyLzTY7Qx5hB5IMOcOXNtV3y/SD/qIDShAZNwNvQhhbPpNzZhADNwFqQwAHknZ9aXxBBCIS1uQgemIPyvNqADbWBIoQMdYGhCCH2YhQjkxzbXdmEX9CHa+VLerCoiFLdB9Hoog7ybN8tyTAj5NuyigXybN04h/socdrsBAJ7+C8bdYY6RHcyX8xwvJ/08OdCxgq38UCfbQWdXfyq6Oux2G+3Zm2+4avFZZ3e6aaPV2BtNnzUfDlpntcIu"), c => c.charCodeAt(0)));
    // @ts-ignore
    return (await dew.AsBind.instantiate(wasm)).exports;
}

const module = await initWasmModule();

export function welcome(name: string): string {
    return module.welcome(name);
}

export function add(a: number, b: number): number {
    return module.add(a, b);
}
