import * as brotli from "https://deno.land/x/brotli@v0.1.4/mod.ts";
import dew from "https://dev.jspm.io/as-bind@0.6.1";

async function initWasmModule(): Promise<any> {
    const wasm = brotli.decompress(Uint8Array.from(atob("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"), c => c.charCodeAt(0)));
    // @ts-ignore
    return (await dew.AsBind.instantiate(wasm)).exports;
}

const module = await initWasmModule();

export function welcome(name: string): string {
    return module.welcome(name);
}

export function add(a: number, b: number): number {
    return module.add(a, b);
}
